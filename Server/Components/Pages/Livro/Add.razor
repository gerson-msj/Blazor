@page "/livros/add"
@inject ILogger<Add> Logger
@rendermode InteractiveServer

@using Blazor.Core.Domain.Dto
@using Blazor.Server.Components.Shared

<h3>Add</h3>

<EditForm FormName="add_form" Model="model" OnValidSubmit="HandleSubmit">
    <ValidationSummary />

    <AutorComponent @bind-Value="model!.Autor" />
    <button type="submit">Enviar</button>
</EditForm>

<p>
    Autor: @(model?.Autor?.Nome ?? "")
</p>

@code {

    [SupplyParameterFromForm]
    private LivroDto? model {get;set;}

    protected override void OnInitialized()
    {
        model ??= new();
        model.Autor ??= new();
    }
    private void HandleSubmit(EditContext args)
    {
        Logger.LogInformation("Enviado!");
    }
}
